@model ExpenseTracker.Models.Category

@{
    ViewData["Title"] = Model?.CategoryId == 0 ? "Create Category" : "Edit Category";
}

<!-- Hero Section -->
<div class="category-form-hero">
    <div class="hero-content">
        <h1 class="hero-title">@(Model?.CategoryId == 0 ? "ğŸ·ï¸ Create Category" : "âœï¸ Edit Category")</h1>
        <p class="hero-subtitle">@(Model?.CategoryId == 0 ? "Add a new category to organize your transactions" : "Update category details")</p>
    </div>
</div>

<div class="category-form-container">
    <div class="form-main-card">
        <form asp-action="AddOrEdit" class="modern-category-form">
            @Html.AntiForgeryToken()
            <input type="hidden" asp-for="CategoryId" />

            <!-- Type Selection -->
            <div class="form-field">
                <label class="field-label">
                    <span class="label-icon">ğŸ’¼</span>
                    <span>Category Type</span>
                    <span class="required-mark">*</span>
                </label>
                <div class="type-selector">
                    <input asp-for="Type" type="radio" class="type-radio" id="expense" value="Expense">
                    <label class="type-option expense-option" for="expense">
                        <span class="type-icon">ğŸ’¸</span>
                        <span class="type-label">Expense</span>
                        <span class="type-desc">Money going out</span>
                    </label>
                    
                    <input asp-for="Type" type="radio" class="type-radio" id="income" value="Income">
                    <label class="type-option income-option" for="income">
                        <span class="type-icon">ğŸ’°</span>
                        <span class="type-label">Income</span>
                        <span class="type-desc">Money coming in</span>
                    </label>
                </div>
            </div>

            <!-- Title Input -->
            <div class="form-field">
                <label asp-for="Title" class="field-label">
                    <span class="label-icon">ğŸ“</span>
                    <span>Category Title</span>
                    <span class="required-mark">*</span>
                </label>
                <input asp-for="Title" class="modern-input" placeholder="e.g., Groceries, Salary, Transport" required />
                <span asp-validation-for="Title" class="field-error"></span>
            </div>

            <!-- Icon Input -->
            <div class="form-field">
                <label asp-for="Icon" class="field-label">
                    <span class="label-icon">ğŸ˜Š</span>
                    <span>Icon (Emoji)</span>
                    <span class="optional-mark">(Optional)</span>
                </label>
                <div class="icon-input-wrapper">
                    <input asp-for="Icon" class="modern-input icon-input" placeholder="Pick an emoji" maxlength="2" />
                    <div class="icon-preview" id="iconPreview">@(Model?.Icon ?? "ğŸ·ï¸")</div>
                </div>
                <div class="icon-suggestions">
                    <span class="suggestion-label">Quick picks:</span>
                    <button type="button" class="icon-btn" data-icon="ğŸ”">ğŸ”</button>
                    <button type="button" class="icon-btn" data-icon="ğŸš—">ğŸš—</button>
                    <button type="button" class="icon-btn" data-icon="ğŸ ">ğŸ </button>
                    <button type="button" class="icon-btn" data-icon="ğŸ’¼">ğŸ’¼</button>
                    <button type="button" class="icon-btn" data-icon="ğŸ¬">ğŸ¬</button>
                    <button type="button" class="icon-btn" data-icon="âš¡">âš¡</button>
                    <button type="button" class="icon-btn" data-icon="ğŸ“">ğŸ“</button>
                    <button type="button" class="icon-btn" data-icon="ğŸ’Š">ğŸ’Š</button>
                </div>
                <span asp-validation-for="Icon" class="field-error"></span>
            </div>

            <!-- Action Buttons -->
            <div class="form-actions">
                <a asp-action="Index" class="btn-cancel">
                    <span>â†</span>
                    <span>Cancel</span>
                </a>
                <button type="submit" class="btn-submit">
                    <span>@(Model?.CategoryId == 0 ? "âœ“" : "ğŸ’¾")</span>
                    <span>@(Model?.CategoryId == 0 ? "Create Category" : "Update Category")</span>
                </button>
            </div>
        </form>
    </div>

    <!-- Tips Sidebar -->
    <div class="tips-sidebar">
        <div class="tip-card tip-primary">
            <div class="tip-icon">ğŸ’¡</div>
            <div class="tip-content">
                <h4>Naming Tips</h4>
                <p>Use clear, descriptive names that you'll easily recognize when adding transactions.</p>
            </div>
        </div>

        <div class="tip-card tip-success">
            <div class="tip-icon">ğŸ¨</div>
            <div class="tip-content">
                <h4>Visual Identity</h4>
                <p>Choose emojis that represent your category at a glance for faster identification.</p>
            </div>
        </div>

        <div class="tip-card tip-info">
            <div class="tip-icon">ğŸ“Š</div>
            <div class="tip-content">
                <h4>Organization</h4>
                <p>Group similar categories together and keep your list organized for better tracking.</p>
            </div>
        </div>
    </div>
</div>

<script>
    // Icon preview and selection
    const iconInput = document.querySelector('.icon-input');
    const iconPreview = document.getElementById('iconPreview');
    const iconBtns = document.querySelectorAll('.icon-btn');

    iconInput?.addEventListener('input', function() {
        iconPreview.textContent = this.value || 'ğŸ·ï¸';
    });

    iconBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const icon = this.getAttribute('data-icon');
            iconInput.value = icon;
            iconPreview.textContent = icon;
        });
    });
</script>

